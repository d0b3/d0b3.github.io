<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>d0b3.github.io</title>
		<style>
			html, body { margin: 0; height: 100%; }
			body {
				display: flex;
				flex-flow: column;
				align-items: center;
				justify-content: center;
				background: #fefbf7;
				color: #a0bcc2;
			}
			textarea {
				width: 480px;
				height: 320px;
			}
		</style>
		<script type="module">
	
			const PUZZLE = new Uint8Array([114,58,228,221,232,108,230,138,85,182,27,158,161,230,138,80,87,31,117,58,166,201,194,58,196,241,208,104,71,240,146,231,76,71,239,96,15,149,60,187,229,119,67,196,202,176,116,232,238,212,112,25,97,207,238,143,74,57,87,156,79,0,86,136,110,44,255,213,250,38,185]);
		
			await new Promise(r => onload = r);

			const $ta = document.querySelector('textarea');
			try { $ta.value = localStorage.getItem('value') || ''; } catch { }

			$ta.onchange = $ta.onkeyup = async () => {
				const hash = new Uint8Array(await crypto.subtle.digest('SHA-512', new TextEncoder().encode($ta.value)));
				for (let i = 0; i < PUZZLE.length; i++) PUZZLE[i] ^= hash[i%hash.length];
				const value = new TextDecoder().decode(PUZZLE);
				for (let i = 0; i < PUZZLE.length; i++) PUZZLE[i] ^= hash[i%hash.length];
				if (value.startsWith('http')) {
					try { localStorage.setItem('value', $ta.value); } catch { }
					$ta.onchange = $ta.onkeyup = null;
					$ta.value = 'checking';
					try {
						const res = await fetch(value);
						if (!res.ok) throw 'nope';
					} catch {
						$ta.value = 'vodafone mÃ¼de';
						setTimeout(() => {
							location.reload();
						}, 10000);
						return;
					}
					$ta.value = 'redirecting';
					setTimeout(() => {
						location.href = value;
					}, 2000);
				}
			};

			$ta.onchange();

		</script>
	</head>
	<body>
		<h1>hello world</h1>
		<textarea></textarea>
	</body>
</html>
