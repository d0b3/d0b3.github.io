<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>d0b3.github.io</title>
    <style>
      html, body { margin: 0; height: 100%; }
      body {
        display: flex;
        flex-flow: column;
        align-items: center;
        justify-content: center;
        background: #fefbf7;
        color: #a0bcc2;
      }
      textarea {
        width: 480px;
        height: 320px;
      }
    </style>
    <script type="module">

      await new Promise(r => addEventListener('DOMContentLoaded', r, { once: true }));

      const $ta = document.querySelector('textarea');
      try { $ta.value = localStorage.getItem('value') || ''; } catch { }

      const SALT = new Uint8Array([203,238,254,237,240,20,171,125,145,5,70,174,142,85,42,81,209,41,204,24,74,58,62,66,117,199,134,140,119,220,55,203,239,137,6,166,114,113,201,103,250,5,172,49,161,185,208,188,195,49,89,62,98,68,53,245,26,81,244,245,188,233,83,62]);

      const PUZZLES = [
        [ new Uint8Array([237,186,69,41,17,167,217,163,6,51,74,156,136,181,7,128,22,183,153,16,95,174,166,167,155,56,178,114,150,66,113,74,194,241,66,51,72,163,195,235,76,50,81,138,149,165,70,156,6,176,141,25,74,189,177,240,213,52,176,51,222,27,61,1,158,249,94,36,11,180,138,177,0,60,24,198,204,189,118,157,83,244,203,85,11,239,244,254,150,123,253,60,220,23,63,9,150,184,78,50,11,164,222,185,107,112,76,139,159,230,23,211,91,181,156,20,66,187,244,183,219,43,178,110,136,31,56,65,194,236,93,46,95,248,133,246,77,120,86,213,159,163,73,129,22,160,138,7,82,226,183,177,216,49,168,114,159,67,118,70,216,181,89,52,23,178,132,237,91,101,70,148,131,179,78,149,31,181,153,16,5,172,187,179,153,48,180,104,211,117,115,64,197,235,3,55,22,240,131,176,7,120,64,158,141,179,70,135,72,136,133,85,11,239,244,254,150,123,253,60,220,23,63,9,150,184,13,125,69,182,221,248,64,104,5,186,128,175,89,128,93,166,142,20,79,182,252,170,196,46,184,53,199,107,113,9,150,184,13,125,69,247,138,185,9,60,5,216,204,230,10,211,83,181,156,20,66,187,244,156,218,50,174,111,210,84,112,71,216,253,78,41,77,139,136,222,234,160,75,140,137,180,118,209,95,244,183,87,66,162,185,187,196,117,176,121,148,69,49,7,219,241,94,41,75,249,132,90,149,126,64,138,141,170,70,221,93,250,197,41,9,230,239,130,216,123,253,60,220,23,63,9,150,184,13,125,69,247,138,185,9,97,12,208,197,239,8,174]), new Uint8Array([251,76,241,96,12,246,85,224,118,15,150,32,51,134,30,87,57,210,86,81,204,25,13,235,190,108,124,187,188,32,56,6]) ]
      ];

      $ta.onchange = $ta.onkeyup = async () => {
        const secret = new Uint8Array(await crypto.subtle.digest('SHA-256', new TextEncoder().encode($ta.value)));
        for (const [ schatz, verify ] of PUZZLES) {
          for (let i = 0; i < schatz.length; i++) schatz[i] ^= secret[i%secret.length];
          const buf = new Uint8Array(SALT.length + schatz.length + SALT.length);
          buf.set(SALT, 0);
          buf.set(schatz, SALT.length);
          buf.set(SALT, SALT.length + schatz.length);
          const solved = new Uint8Array(await crypto.subtle.digest('SHA-256', buf));
          let equal = true;
          for (let i = 0; i < solved.length && equal; i++) equal = solved[i] === verify[i];
          if (equal) {
            try { localStorage.setItem('value', $ta.value); } catch { }
            $ta.onchange = $ta.onkeyup = null;
            $ta.value = 'checking';
            const [ url, code ] = JSON.parse(new TextDecoder().decode(schatz));
            try {
              const res = await fetch(url);
              if (!res.ok) throw 'nope';
            } catch {
              $ta.value = 'vodafone mÃ¼de';
              setTimeout(() => { location.reload(); }, 10000);
              return;
            }
            document.querySelector('style').remove();
            document.querySelector('body').innerHTML = '';
            eval(code);
            return;
          }
          for (let i = 0; i < schatz.length; i++) schatz[i] ^= secret[i%secret.length];
        }

      };

      $ta.onchange();

    </script>
  </head>
  <body>
    <h1>hello world</h1>
    <textarea></textarea>
  </body>
</html>